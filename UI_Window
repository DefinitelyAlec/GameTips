from tkinter import *
import easyocr
import webbrowser
import threading

#Create an instance of tkinter window or frame
win = Tk()

#Setting the geometry of window
win.geometry("600x350")

#Create a Label
Label(win, text= "Hello World! ",font=('Helvetica bold', 15)).pack(pady=20)

#Make the window jump above all
win.attributes('-topmost',True)

maps = ["ASCENT", "BIND", "BREEZE", "HAVEN", "ICEBOX", "SPLIT"]

def findMatch():
    cancelSearchButton["state"] = "active"
    findingMatchButton["state"] = "disabled"
    x = threading.Thread(target = ocrStuff, args = ())
    x.start()

def ocrStuff():
    print("waiting for match...")
    reader = easyocr.Reader(['en'])
    result = reader.readtext('bind.jpg', detail = 0)

    for res in result:
        for map in maps:
            if res == map:
                result = map
                break

    print(result)
    cancelSearchButton["state"] = "disabled" 
    findingMatchButton["state"] = "active"
    return result

def goToSite():
    print("redirecting to site...")
    webbrowser.open("http://youtube.com", new=1)

def cancelMatch():
    print("cancelling match")
    cancelSearchButton["state"] = "disabled" 
    findingMatchButton["state"] = "active"
    #TODO: actually kill the thread


findingMatchButton = Button(win, text = "finding a match!", fg = "green",
                      command = findMatch)
findingMatchButton.pack()

moreInfoButton = Button(win, text = "click for our website", fg = "black",
                      command = goToSite)
moreInfoButton.pack()

cancelSearchButton = Button(win, text = "cancel search", fg = "red",
                      command = cancelMatch)
cancelSearchButton.pack()
cancelSearchButton["state"] = "disabled"

win.mainloop()
